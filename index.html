<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Giải Toán & Trắc Nghiệm</title>
    <style>
        /* Đảm bảo body chiếm toàn bộ viewport và không có margin/padding */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Ngăn cuộn trang chính khi lớp phủ hiển thị */
            font-family: 'Inter', sans-serif; /* Sử dụng font Inter */
            display: flex;
            flex-direction: column;
            height: 100vh; /* Chiếm toàn bộ chiều cao viewport */
            background-color: #f3f4f6; /* Màu nền nhẹ mặc định */
        }

        /* Kiểu cho iframe */
        iframe {
            width: 100%;
            flex-grow: 1; /* Cho phép iframe chiếm hết không gian còn lại */
            border: none;
        }

        /* Kiểu cho thông báo tùy chỉnh ở cuối trang */
        .custom-message {
            background-color: #e0f2f7; /* Màu xanh nhạt */
            color: #00796b; /* Màu xanh đậm */
            padding: 15px;
            text-align: center;
            font-size: 0.9em; /* Kích thước chữ nhỏ hơn theo yêu cầu trước */
            border-bottom: 2px solid #b2ebf2;
            font-weight: 500;
        }
        .custom-message a {
            color: #004d40;
            font-weight: bold;
            text-decoration: underline;
        }
        .note-text {
            font-size: 0.25em; /* Kích thước chữ rất nhỏ, có thể cần điều chỉnh */
            color: #4CAF50; /* Màu xanh lá */
            margin-top: 5px;
        }

        /* Kiểu cho lớp phủ chờ tải trang (Loading Overlay) */
        .loading-overlay {
            position: fixed; /* Cố định trên màn hình */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Nền sẽ được đặt bằng JavaScript */
            transition: background-color 1.5s ease-in-out, opacity 0.5s ease; /* Hiệu ứng chuyển màu nền mượt mà */

            display: flex;
            flex-direction: column;
            justify-content: center; /* Căn giữa theo chiều dọc */
            align-items: center; /* Căn giữa theo chiều ngang */
            z-index: 9999; /* Đảm bảo nằm trên cùng của mọi thứ */
            padding: 50px; /* Tăng padding để văn bản không bị sát cạnh */
            box-sizing: border-box; /* Đảm bảo padding không làm tăng kích thước tổng thể */
            text-align: center;
        }
        .loading-overlay.hidden {
            opacity: 0; /* Làm mờ dần */
            visibility: hidden; /* Ẩn hoàn toàn khỏi DOM sau khi mờ */
            pointer-events: none; /* Cho phép tương tác với nội dung bên dưới khi ẩn */
        }

        /* Kiểu cho khu vực hiển thị câu nói */
        .quote-display {
            font-size: 2.5em; /* To rõ ràng hơn, chiếm nhiều không gian */
            /* Màu chữ sẽ được đặt bằng JavaScript */
            font-style: italic;
            max-width: 90%; /* Giới hạn chiều rộng để dễ đọc */
            margin: 0 auto;
            opacity: 0; /* Ban đầu ẩn để tạo hiệu ứng fade */
            transition: opacity 1s ease-in-out, color 1.5s ease-in-out; /* Hiệu ứng mờ dần/hiện ra và chuyển màu chữ */
            display: flex; /* Sử dụng flexbox để căn giữa văn bản */
            align-items: center; /* Căn giữa theo chiều dọc */
            justify-content: center; /* Căn giữa theo chiều ngang */
            height: 100%; /* Chiếm toàn bộ chiều cao của phần tử cha */
            text-align: center; /* Đảm bảo văn bản được căn giữa */
        }
        .quote-display.fade-in {
            opacity: 1;
        }

        /* Responsive adjustments for smaller screens */
        @media (max-width: 768px) {
            .quote-display {
                font-size: 1.8em; /* Thu nhỏ cho máy tính bảng */
                max-width: 90%;
            }
        }

        @media (max-width: 480px) {
            .quote-display {
                font-size: 1.4em; /* Thu nhỏ cho điện thoại */
                max-width: 95%;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="loadingOverlay" class="loading-overlay">
        <div id="quoteDisplay" class="quote-display"></div>
    </div>

    <iframe id="mainIframe" src="https://script.google.com/macros/s/AKfycbw5tyF6r1bCdVShuC5gCaKp7PUomYE7GQRZzHRgXojjP5qE-sB0WdOLOkiPSTHAFwzoeA/exec"></iframe>

    <div class="custom-message">
        <p>
            Đây là ứng dụng do nhóm "Lý Ngọc An-Huỳnh Gia Bảo" phát triển.
        </p>
    </div>

    <script>
        // Lấy tham chiếu đến các phần tử HTML
        const loadingOverlay = document.getElementById('loadingOverlay');
        const mainIframe = document.getElementById('mainIframe');
        const quoteDisplay = document.getElementById('quoteDisplay');

        // Danh sách 20 câu nói hay
        const quotes = [
            "Học, học nữa, học mãi. – Lê-nin",
            "Không thầy đố mày làm nên. – Tục ngữ Việt Nam",
            "Dân ta phải biết sử ta, cho tường gốc tích nước nhà Việt Nam. – Chủ tịch Hồ Chí Minh",
            "Một chữ cũng là thầy, nửa chữ cũng là thầy. – Tục ngữ Việt Nam",
            "Học vấn không có biên giới. – Khuyết danh",
            "Non sông Việt Nam có trở nên tươi đẹp hay không, dân tộc Việt Nam có bước tới đài vinh quang để sánh vai với các cường quốc năm châu được hay không, chính là nhờ một phần lớn ở công học tập của các em. – Chủ tịch Hồ Chí Minh",
            "Người thầy trung bình chỉ nói. Người thầy giỏi giải thích. Người thầy xuất chúng chứng minh. Người thầy vĩ đại truyền cảm hứng. – William Arthur Ward",
            "Đường đi khó không phải vì ngăn sông cách núi, mà vì lòng người ngại núi e sông. – Nguyễn Bá Học",
            "Yêu Tổ quốc, yêu đồng bào. – Chủ tịch Hồ Chí Minh",
            "Tri thức là sức mạnh. – Francis Bacon",
            "Công cha nghĩa mẹ ơn thầy, nghĩa tình non nước công xây đắp bền. – Ca dao Việt Nam",
            "Sống là phải học, học để biết, học để làm, học để chung sống, học để tự khẳng định mình. – Jacques Delors",
            "Ai ơi giữ chí cho bền, dù ai xoay hướng đổi nền mặc ai. – Tục ngữ Việt Nam",
            "Nghề giáo là nghề cao quý nhất trong các nghề cao quý, vì nó sáng tạo ra những con người sáng tạo. – Phạm Văn Đồng",
            "Học không biết chán, dạy không biết mỏi. – Khổng Tử",
            "Lòng yêu nước là điểm tựa của mọi ý chí, mọi hành động, mọi sáng kiến, mọi sáng tạo. – V.I. Lê-nin",
            "Thầy cô không chỉ dạy học trò kiến thức mà còn dạy cả cách làm người. – Khuyết danh",
            "Đừng bao giờ ngừng học hỏi, bởi cuộc sống không bao giờ ngừng dạy. – Khuyết danh",
            "Mỗi tấc đất của Tổ quốc là một tấc vàng. – Khuyết danh",
            "Học hành là việc cả đời, không ai có thể học thay cho ai. – Tục ngữ Việt Nam"
        ];

        let lastQuoteIndex = -1; // Biến để lưu chỉ số câu nói cuối cùng được hiển thị

        // Hàm tạo màu ngẫu nhiên (dạng hex)
        function generateRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Hàm chuyển đổi màu hex sang RGB
        function hexToRgb(hex) {
            const bigint = parseInt(hex.slice(1), 16);
            const r = (bigint >> 16) & 255;
            const g = (bigint >> 8) & 255;
            const b = bigint & 255;
            return { r, g, b };
        }

        // Hàm tính toán độ sáng (luminance) của màu RGB
        // Dựa trên công thức W3C cho độ sáng tương đối
        function getLuminance(r, g, b) {
            const a = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
        }

        // Hàm chọn màu chữ tương phản (đen hoặc trắng)
        function getContrastingTextColor(hexColor) {
            const { r, g, b } = hexToRgb(hexColor);
            const luminance = getLuminance(r, g, b);
            return luminance > 0.5 ? '#000000' : '#FFFFFF'; // Nếu nền sáng, chữ đen; nếu nền tối, chữ trắng
        }

        // Hàm hiển thị câu nói tiếp theo với hiệu ứng fade và màu sắc ngẫu nhiên
        function displayNextQuote() {
            let newQuoteIndex;
            do {
                newQuoteIndex = Math.floor(Math.random() * quotes.length);
            } while (newQuoteIndex === lastQuoteIndex && quotes.length > 1);

            lastQuoteIndex = newQuoteIndex;

            const randomBgColor = generateRandomColor();
            const contrastingTextColor = getContrastingTextColor(randomBgColor);

            quoteDisplay.style.opacity = 0; // Làm mờ câu nói hiện tại
            
            setTimeout(() => {
                loadingOverlay.style.backgroundColor = randomBgColor; // Đặt màu nền mới
                quoteDisplay.style.color = contrastingTextColor; // Đặt màu chữ mới
                quoteDisplay.textContent = quotes[newQuoteIndex]; // Đặt nội dung câu nói mới
                quoteDisplay.style.opacity = 1; // Hiện ra câu nói mới
            }, 1000); // Chờ 1 giây để hiệu ứng mờ hoàn tất trước khi đổi nội dung và màu sắc
        }

        // --- CÁC BIẾN VÀ LOGIC MỚI ĐỂ ĐIỀU KHIỂN THỜI GIAN TỐI THIỂU ---
        const MIN_DISPLAY_TIME = 5000; // Thời gian hiển thị tối thiểu (5 giây)
        let iframeLoaded = false;
        let minTimeElapsed = false;

        // Hàm ẩn màn hình chờ
        function hideLoadingScreen() {
            if (iframeLoaded && minTimeElapsed) {
                loadingOverlay.classList.add('hidden');
                window.scrollTo(0, 0);
            }
        }

        // Lắng nghe sự kiện 'load' của iframe
        mainIframe.addEventListener('load', () => {
            iframeLoaded = true;
            console.log("Iframe đã tải xong.");
            hideLoadingScreen(); // Thử ẩn màn hình chờ
        });

        // Đặt timeout cho thời gian hiển thị tối thiểu
        setTimeout(() => {
            minTimeElapsed = true;
            console.log(`Thời gian tối thiểu (${MIN_DISPLAY_TIME / 1000}s) đã trôi qua.`);
            hideLoadingScreen(); // Thử ẩn màn hình chờ
        }, MIN_DISPLAY_TIME);
        // --- KẾT THÚC CÁC BIẾN VÀ LOGIC MỚI ---

        // Hiển thị câu nói đầu tiên ngay lập tức
        displayNextQuote();
        // Cập nhật câu nói mỗi 7 giây
        setInterval(displayNextQuote, 7000);

        // Fallback: Đặt một timeout để ẩn lớp phủ nếu sự kiện 'load' của iframe không xảy ra
        // (Thời gian này nên dài hơn MIN_DISPLAY_TIME)
        setTimeout(() => {
            if (!loadingOverlay.classList.contains('hidden')) {
                console.warn("Iframe load event not detected, hiding loading overlay after fallback timeout.");
                loadingOverlay.classList.add('hidden');
            }
        }, MIN_DISPLAY_TIME + 10000); // Ví dụ: MIN_DISPLAY_TIME + 10 giây dự phòng
    </script>
</body>
</html>
