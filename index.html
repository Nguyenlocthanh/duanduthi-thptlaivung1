<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>·ª®ng d·ª•ng ƒêa Ch·ª©c NƒÉng</title>
    <style>
        /* ƒê·∫£m b·∫£o body chi·∫øm to√†n b·ªô viewport v√† kh√¥ng c√≥ margin/padding */
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* NgƒÉn cu·ªôn trang ch√≠nh khi l·ªõp ph·ªß hi·ªÉn th·ªã */
            font-family: 'Inter', sans-serif; /* S·ª≠ d·ª•ng font Inter */
            display: flex;
            flex-direction: column;
            height: 100vh; /* Chi·∫øm to√†n b·ªô chi·ªÅu cao viewport */
            background-color: #f3f4f6; /* M√†u n·ªÅn nh·∫π m·∫∑c ƒë·ªãnh */
        }

        /* Container cho c√°c iframe ch√≠nh, chi·∫øm h·∫øt kh√¥ng gian c√≤n l·∫°i */
        #appContentContainer {
            flex-grow: 1;
            display: flex; /* S·ª≠ d·ª•ng flex ƒë·ªÉ qu·∫£n l√Ω c√°c iframe con */
            width: 100%;
            position: relative; /* Quan tr·ªçng ƒë·ªÉ c√°c iframe con c√≥ th·ªÉ position: absolute */
        }

        /* Ki·ªÉu cho m·ªói iframe ·ª©ng d·ª•ng ch√≠nh */
        .main-app-iframe {
            position: absolute; /* X·∫øp ch·ªìng l√™n nhau */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            visibility: hidden; /* ·∫®n b·∫±ng visibility ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn k√≠ch th∆∞·ªõc */
            opacity: 0;
            transition: opacity 0.5s ease-in-out; /* Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªïi m∆∞·ª£t m√† */
        }
        .main-app-iframe.active {
            visibility: visible;
            opacity: 1;
        }

        /* Ki·ªÉu cho th√¥ng b√°o t√πy ch·ªânh ·ªü cu·ªëi trang */
        .custom-message {
            background-color: #e0f2f7; /* M√†u xanh nh·∫°t */
            color: #00796b; /* M√†u xanh ƒë·∫≠m */
            padding: 15px;
            text-align: center;
            font-size: 0.9em;
            border-top: 2px solid #b2ebf2; /* Thay border-bottom th√†nh border-top */
            font-weight: 500;
        }

        /* Ki·ªÉu cho l·ªõp ph·ªß ch·ªù t·∫£i trang (Loading Overlay) */
        .loading-overlay {
            position: fixed; /* C·ªë ƒë·ªãnh tr√™n m√†n h√¨nh */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* N·ªÅn s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t b·∫±ng JavaScript */
            transition: background-color 1.5s ease-in-out, opacity 0.5s ease; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u n·ªÅn m∆∞·ª£t m√† */

            display: flex;
            flex-direction: column;
            justify-content: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu ngang */
            z-index: 9999; /* ƒê·∫£m b·∫£o n·∫±m tr√™n c√πng c·ªßa m·ªçi th·ª© */
            padding: 50px;
            box-sizing: border-box;
            text-align: center;
        }
        .loading-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none; /* Cho ph√©p t∆∞∆°ng t√°c v·ªõi n·ªôi dung b√™n d∆∞·ªõi khi ·∫©n */
        }

        /* Ki·ªÉu cho khu v·ª±c hi·ªÉn th·ªã c√¢u n√≥i */
        .quote-display {
            font-size: 2.5em; /* To r√µ r√†ng h∆°n, chi·∫øm nhi·ªÅu kh√¥ng gian */
            /* M√†u ch·ªØ s·∫Ω ƒë∆∞·ª£c ƒë·∫∑t b·∫±ng JavaScript */
            font-style: italic;
            max-width: 90%; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông ƒë·ªÉ d·ªÖ ƒë·ªçc */
            margin: 0 auto;
            opacity: 0; /* Ban ƒë·∫ßu ·∫©n ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng fade */
            transition: opacity 1s ease-in-out, color 1.5s ease-in-out; /* Hi·ªáu ·ª©ng m·ªù d·∫ßn/hi·ªán ra v√† chuy·ªÉn m√†u ch·ªØ */
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%; /* Chi·∫øm to√†n b·ªô chi·ªÅu cao c·ªßa ph·∫ßn t·ª≠ cha */
            text-align: center;
        }
        .quote-display.fade-in {
            opacity: 1;
        }

        /* === Bong b√≥ng chuy·ªÉn ƒë·ªïi v√† Menu === */
        .switch-bubble-btn {
            position: fixed;
            bottom: 80px; /* N√¢ng cao h∆°n ƒë·ªÉ tr√°nh ch·ªìng l√™n th√¥ng b√°o cu·ªëi trang */
            right: 20px;
            background-color: #f97316; /* M√†u cam */
            color: white;
            border-radius: 9999px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            /* B·ªè font-size: 2rem; v√¨ gi·ªù d√πng ·∫£nh */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            padding: 2px; /* Padding nh·∫π ƒë·ªÉ ·∫£nh kh√¥ng d√≠nh s√°t vi·ªÅn */
            overflow: hidden; /* ƒê·∫£m b·∫£o ·∫£nh kh√¥ng tr√†n ra ngo√†i */
        }
        .switch-bubble-btn:hover {
            background-color: #ea580c; /* Cam ƒë·∫≠m h∆°n khi hover */
            transform: translateY(-2px);
        }
        .switch-bubble-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* Ki·ªÉu cho ·∫£nh b√™n trong bong b√≥ng */
        .switch-bubble-btn .bubble-icon {
            width: 100%; /* ·∫¢nh chi·∫øm to√†n b·ªô chi·ªÅu r·ªông c·ªßa bong b√≥ng */
            height: 100%; /* ·∫¢nh chi·∫øm to√†n b·ªô chi·ªÅu cao c·ªßa bong b√≥ng */
            object-fit: contain; /* ƒê·∫£m b·∫£o ·∫£nh hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß m√† kh√¥ng b·ªã c·∫Øt ho·∫∑c m√©o */
            border-radius: 9999px; /* ƒê·ªÉ ·∫£nh c≈©ng tr√≤n theo h√¨nh d·∫°ng bong b√≥ng */
        }

        .switch-options-menu {
            position: fixed;
            bottom: 150px; /* V·ªã tr√≠ ph√≠a tr√™n bong b√≥ng */
            right: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            padding: 10px 0;
            width: 220px; /* Chi·ªÅu r·ªông menu */
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
            z-index: 999;
            display: flex;
            flex-direction: column;
        }
        .switch-options-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        .switch-options-menu .menu-item {
            display: block;
            padding: 10px 15px;
            color: #333;
            text-decoration: none;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 0.95rem;
        }
        .switch-options-menu .menu-item:hover {
            background-color: #f0f0f0;
        }
        .switch-options-menu .menu-item.active {
            background-color: #e0f2f7; /* M√†u xanh nh·∫°t cho m·ª•c ƒëang ho·∫°t ƒë·ªông */
            color: #00796b;
            font-weight: bold;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .quote-display { font-size: 1.8em; max-width: 90%; }
            .switch-bubble-btn { width: 50px; height: 50px; bottom: 70px; }
            .switch-options-menu { bottom: 130px; width: 180px; }
            .switch-options-menu .menu-item { font-size: 0.9rem; }
        }

        @media (max-width: 480px) {
            .quote-display { font-size: 1.4em; max-width: 95%; }
            .switch-bubble-btn { width: 45px; height: 45px; bottom: 60px; right: 15px; }
            .switch-options-menu { bottom: 115px; right: 15px; width: 160px; padding: 5px 0; }
            .switch-options-menu .menu-item { padding: 8px 12px; font-size: 0.85rem; }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="loadingOverlay" class="loading-overlay">
        <div id="quoteDisplay" class="quote-display"></div>
    </div>

    <div id="appContentContainer">
        <iframe id="appIframe2" class="main-app-iframe active" src="https://script.google.com/macros/s/AKfycby_mvqxvmdB7ljk6Ywzw_782Mdad_w3HUCSIhO7Ee8BZfYcdXrY_VYCqltpjOGs9feC/exec"></iframe>

        <iframe id="appIframe1" class="main-app-iframe" src="https://script.google.com/macros/s/AKfycbw5tyF6r1bCdVShuC5gCaKp7PUomYE7GQRZzHRgXojjP5qE-sB0WdOLOkiPSTHAFwzoeA/exec"></iframe>

        <iframe id="appIframe3" class="main-app-iframe" src="https://script.google.com/macros/s/AKfycbwQExUP1qsmDZn5lEe5Bd5dLoVzCTFOoWhYtHnsjp_Q_qVL4MdUOmBAR7f1tjCPNQOXsQ/exec"></iframe>

        <iframe id="appIframe4" class="main-app-iframe" src="https://script.google.com/macros/s/AKfycbwnzBdxtExqS-2hJJ5aQiZz1d4hHo4YpnlIMiUQQ-sZnHGQzGpRLq-wZfIhLfIXRjQ_/exec"></iframe>
        <iframe id="appIframe5" class="main-app-iframe" src="https://script.google.com/macros/s/AKfycbxIfpS_wOLtG793C7ffGdS1L7E3bwnBfc1W1-BJPTMnwrG9PmQ6FTL3dgdwpKVRkFvx/exec"></iframe>
        <iframe id="appIframe6" class="main-app-iframe" src=""></iframe>
        <iframe id="appIframe7" class="main-app-iframe" src="https://script.google.com/macros/s/AKfycbw9sejTq7pns5tEn84A2A9P6bz7nT03SMNm0GYCMHTtFPlJXT1w9liAaWzdEyjbg2hhRw/exec"></iframe>

        
        </div>
    
    <div id="switchBubble" class="switch-bubble-btn">
        <img src="https://lh3.googleusercontent.com/pw/AP1GczMrdABpkyuFldP3L22YPavg9YJqbEZI6ytrgoYsfrBwgMh1SsNd6CjLCiBj0XpsdAioQu5hjy5meiQQrhBT6W7USJsc43yNgwl5mD-TfaCXhBxQDlcZuL0rSdRDCXNnTn4z3kBhusFuYbMBqPEEmtg=w500-h500-s-no-gm?authuser=0" alt="N√∫t chuy·ªÉn ƒë·ªïi ·ª©ng d·ª•ng" class="bubble-icon">
    </div>

    <div id="switchMenu" class="switch-options-menu">
        <button data-target-iframe="appIframe6" class="menu-item">Trang Ch·ªß</button>
        <button data-target-iframe="appIframe1" class="menu-item">·ª®ng D·ª•ng Gi·∫£i To√°n</button>
        <button data-target-iframe="appIframe2" class="menu-item active">üìöKh√°m Ph√° S·ª≠ Vi·ªátüìö</button>
        <button data-target-iframe="appIframe3" class="menu-item">üìöG√≥c L·ªãch S·ª≠üìö</button>
        <button data-target-iframe="appIframe4" class="menu-item">Gi·∫£i To√°n Th√¥ng Minh</button>
        <button data-target-iframe="appIframe5" class="menu-item">Tr√≤ Ch∆°i To√°n H·ªçc</button>
        <button data-target-iframe="appIframe7" class="menu-item">T·∫°o ƒê·ªÅ √în T·∫≠p</button>
        </div>

    <script>
        // Get references to HTML elements
        const loadingOverlay = document.getElementById('loadingOverlay');
        const mainIframe = document.getElementById('appIframe1'); 
        const quoteDisplay = document.getElementById('quoteDisplay');
        const switchBubble = document.getElementById('switchBubble');
        const switchMenu = document.getElementById('switchMenu');
        const menuItems = document.querySelectorAll('.switch-options-menu .menu-item');
        const appIframes = document.querySelectorAll('.main-app-iframe'); 

        // List of 20 quotes
        const quotes = [
            "H·ªçc, h·ªçc n·ªØa, h·ªçc m√£i. ‚Äì L√™-nin",
            "Kh√¥ng th·∫ßy ƒë·ªë m√†y l√†m n√™n. ‚Äì T·ª•c ng·ªØ Vi·ªát Nam",
            "D√¢n ta ph·∫£i bi·∫øt s·ª≠ ta, cho t∆∞·ªùng g·ªëc t√≠ch n∆∞·ªõc nh√† Vi·ªát Nam. ‚Äì Ch·ªß t·ªãch H·ªì Ch√≠ Minh",
            "M·ªôt ch·ªØ c≈©ng l√† th·∫ßy, n·ª≠a ch·ªØ c≈©ng l√† th·∫ßy. ‚Äì T·ª•c ng·ªØ Vi·ªát Nam",
            "H·ªçc v·∫•n kh√¥ng c√≥ bi√™n gi·ªõi. ‚Äì Khuy·∫øt danh",
            "Non s√¥ng Vi·ªát Nam c√≥ tr·ªü n√™n t∆∞∆°i ƒë·∫πp hay kh√¥ng, d√¢n t·ªôc Vi·ªát Nam c√≥ b∆∞·ªõc t·ªõi ƒë√†i vinh quang ƒë·ªÉ s√°nh vai v·ªõi c√°c c∆∞·ªùng qu·ªëc nƒÉm ch√¢u ƒë∆∞·ª£c hay kh√¥ng, ch√≠nh l√† nh·ªù m·ªôt ph·∫ßn l·ªõn ·ªü c√¥ng h·ªçc t·∫≠p c·ªßa c√°c em. ‚Äì Ch·ªß t·ªãch H·ªì Ch√≠ Minh",
            "Ng∆∞·ªùi th·∫ßy trung b√¨nh ch·ªâ n√≥i. Ng∆∞·ªùi th·∫ßy gi·ªèi gi·∫£i th√≠ch. Ng∆∞·ªùi th·∫ßy xu·∫•t ch√∫ng ch·ª©ng minh. Ng∆∞·ªùi th·∫ßy vƒ© ƒë·∫°i truy·ªÅn c·∫£m h·ª©ng. ‚Äì William Arthur Ward",
            "ƒê∆∞·ªùng ƒëi kh√≥ kh√¥ng ph·∫£i v√¨ ngƒÉn s√¥ng c√°ch n√∫i, m√† v√¨ l√≤ng ng∆∞·ªùi ng·∫°i n√∫i e s√¥ng. ‚Äì Nguy·ªÖn B√° H·ªçc",
            "Y√™u T·ªï qu·ªëc, y√™u ƒë·ªìng b√†o. ‚Äì Ch·ªß t·ªãch H·ªì Ch√≠ Minh",
            "Tri th·ª©c l√† s·ª©c m·∫°nh. ‚Äì Francis Bacon",
            "C√¥ng cha nghƒ©a m·∫π ∆°n th·∫ßy, nghƒ©a t√¨nh non n∆∞·ªõc c√¥ng x√¢y ƒë·∫Øp b·ªÅn. ‚Äì Ca dao Vi·ªát Nam",
            "S·ªëng l√† ph·∫£i h·ªçc, h·ªçc ƒë·ªÉ bi·∫øt, h·ªçc ƒë·ªÉ l√†m, h·ªçc ƒë·ªÉ chung s·ªëng, h·ªçc ƒë·ªÉ t·ª± kh·∫≥ng ƒë·ªãnh m√¨nh. ‚Äì Jacques Delors",
            "Ai ∆°i gi·ªØ ch√≠ cho b·ªÅn, d√π ai xoay h∆∞·ªõng ƒë·ªïi n·ªÅn m·∫∑c ai. ‚Äì T·ª•c ng·ªØ Vi·ªát Nam",
            "Ngh·ªÅ gi√°o l√† ngh·ªÅ cao qu√Ω nh·∫•t trong c√°c ngh·ªÅ cao qu√Ω, v√¨ n√≥ s√°ng t·∫°o ra nh·ªØng con ng∆∞·ªùi s√°ng t·∫°o. ‚Äì Ph·∫°m VƒÉn ƒê·ªìng",
            "H·ªçc kh√¥ng bi·∫øt ch√°n, d·∫°y kh√¥ng bi·∫øt m·ªèi. ‚Äì Kh·ªïng T·ª≠",
            "L√≤ng y√™u n∆∞·ªõc l√† ƒëi·ªÉm t·ª±a c·ªßa m·ªçi √Ω ch√≠, m·ªçi h√†nh ƒë·ªông, m·ªçi s√°ng ki·∫øn, m·ªçi s√°ng t·∫°o. ‚Äì V.I. L√™-nin",
            "Th·∫ßy c√¥ kh√¥ng ch·ªâ d·∫°y h·ªçc tr√≤ ki·∫øn th·ª©c m√† c√≤n d·∫°y c·∫£ c√°ch l√†m ng∆∞·ªùi. ‚Äì Khuy·∫øt danh",
            "ƒê·ª´ng bao gi·ªù ng·ª´ng h·ªçc h·ªèi, b·ªüi cu·ªôc s·ªëng kh√¥ng bao gi·ªù ng·ª´ng d·∫°y. ‚Äì Khuy·∫øt danh",
            "M·ªói t·∫•c ƒë·∫•t c·ªßa T·ªï qu·ªëc l√† m·ªôt t·∫•c v√†ng. ‚Äì Khuy·∫øt danh",
            "H·ªçc h√†nh l√† vi·ªác c·∫£ ƒë·ªùi, kh√¥ng ai c√≥ th·ªÉ h·ªçc thay cho ai. ‚Äì T·ª•c ng·ªØ Vi·ªát Nam"
        ];

        let lastQuoteIndex = -1; 

        // Function to generate a random hex color
        function generateRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Function to convert hex color to RGB
        function hexToRgb(hex) {
            const bigint = parseInt(hex.slice(1), 16);
            const r = (bigint >> 16) & 255;
            const g = (bigint >> 8) & 255;
            const b = bigint & 255;
            return { r, g, b };
        }

        // Function to calculate luminance (relative brightness) of an RGB color
        function getLuminance(r, g, b) {
            const a = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return 0.2126 * a[0] + 0.7152 * a[1] + 0.0722 * a[2];
        }

        // Function to choose a contrasting text color (black or white)
        function getContrastingTextColor(hexColor) {
            const { r, g, b } = hexToRgb(hexColor);
            const luminance = getLuminance(r, g, b);
            return luminance > 0.5 ? '#000000' : '#FFFFFF'; 
        }

        // Function to display the next quote with fade effect and random colors
        function displayNextQuote() {
            let newQuoteIndex;
            do {
                newQuoteIndex = Math.floor(Math.random() * quotes.length);
            } while (newQuoteIndex === lastQuoteIndex && quotes.length > 1);

            lastQuoteIndex = newQuoteIndex;

            const randomBgColor = generateRandomColor(); 
            const contrastingTextColor = getContrastingTextColor(randomBgColor); 

            quoteDisplay.style.opacity = 0; 
            
            setTimeout(() => {
                loadingOverlay.style.backgroundColor = randomBgColor; 
                quoteDisplay.style.color = contrastingTextColor; 
                quoteDisplay.textContent = quotes[newQuoteIndex]; 
                quoteDisplay.style.opacity = 1; 
            }, 1000); 
        }

        // --- Logic to control minimum display time ---
        const MIN_DISPLAY_TIME = 5000; 
        let iframeLoaded = false;
        let minTimeElapsed = false;

        // Function to hide the loading screen
        function hideLoadingScreen() {
            if (iframeLoaded && minTimeElapsed) {
                loadingOverlay.classList.add('hidden');
                window.scrollTo(0, 0);
            }
        }

        // Listen for the 'load' event of the first iframe (appIframe1)
        mainIframe.addEventListener('load', () => {
            iframeLoaded = true;
            console.log("First iframe loaded.");
            hideLoadingScreen(); 
        });

        // Set a timeout for the minimum display time
        setTimeout(() => {
            minTimeElapsed = true;
            console.log(`Minimum time (${MIN_DISPLAY_TIME / 1000}s) elapsed.`);
            hideLoadingScreen(); 
        }, MIN_DISPLAY_TIME);
        // --- End minimum display time logic ---


        // --- Logic for Switch Bubble and Iframes ---

        // Function to show a specific iframe and hide others
        function showAppIframe(targetIframeId) {
            appIframes.forEach(iframe => {
                if (iframe.id === targetIframeId) {
                    iframe.classList.add('active'); 
                } else {
                    iframe.classList.remove('active'); 
                }
            });

            // Update 'active' state for the buttons in the menu
            menuItems.forEach(item => {
                if (item.dataset.targetIframe === targetIframeId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });

            switchMenu.classList.remove('active'); 
        }

        // Event listener for the switch bubble click
        switchBubble.addEventListener('click', () => {
            switchMenu.classList.toggle('active'); 
        });

        // Event listener for menu item clicks
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                const targetIframeId = item.dataset.targetIframe; 
                showAppIframe(targetIframeId); 
            });
        });

        // Close menu when clicking outside the bubble and menu
        document.addEventListener('click', (event) => {
            const isClickInsideBubble = switchBubble.contains(event.target);
            const isClickInsideMenu = switchMenu.contains(event.target);

            if (!isClickInsideBubble && !isClickInsideMenu && switchMenu.classList.contains('active')) {
                switchMenu.classList.remove('active');
            }
        });

        // Show the first iframe on initial page load
        showAppIframe('appIframe1'); 

        // --- End Logic for Switch Bubble and Iframes ---

        // Update quote every 7 seconds
        setInterval(displayNextQuote, 7000);

        // Fallback to hide loading screen if loading fails or takes too long
        setTimeout(() => {
            if (!loadingOverlay.classList.contains('hidden')) {
                console.warn("Loading fallback triggered: Hiding loading overlay.");
                loadingOverlay.classList.add('hidden');
            }
        }, MIN_DISPLAY_TIME + 10000); 
    </script>
</body>
</html>
